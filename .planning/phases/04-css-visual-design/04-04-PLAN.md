---
phase: 04-css-visual-design
plan: 04
type: execute
wave: 1
depends_on: ["04-03"]
files_modified:
  - src/App.tsx
  - src/App.css
  - src/styles/themes.css
  - src/components/Header/Header.module.css
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "Logo is visible in both light and dark themes"
    - "Text content is readable against wave backgrounds in both themes"
    - "All text meets WCAG 4.5:1 contrast ratio in both themes"
  artifacts:
    - path: "src/App.css"
      provides: "Content card backgrounds for text readability"
      contains: "content-card"
    - path: "src/styles/themes.css"
      provides: "Card background colors for both themes"
      contains: "color-bg-card"
    - path: "src/components/Header/Header.module.css"
      provides: "Theme-aware logo filter"
      contains: "filter"
  key_links:
    - from: "src/App.css"
      to: "src/styles/themes.css"
      via: "CSS custom property --color-bg-card"
      pattern: "var\\(--color-bg-card\\)"
    - from: "src/components/Header/Header.module.css"
      to: "[data-theme]"
      via: "Theme attribute selector for logo filter"
      pattern: "\\[data-theme.*\\].*\\.logo"
---

<objective>
Fix visual contrast issues discovered during manual testing: logo invisible in light theme and text unreadable against pastel wave backgrounds.

Purpose: Ensure the site is fully usable in both light and dark themes with proper contrast ratios.

Output: Theme-aware logo styling and semi-transparent content cards that ensure text readability regardless of wave background colors.
</objective>

<execution_context>
@/Users/romatroskin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/romatroskin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-css-visual-design/04-01-SUMMARY.md

# Key files to modify
@src/App.tsx
@src/App.css
@src/styles/themes.css
@src/components/Header/Header.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add theme-aware logo filter and content card backgrounds</name>
  <files>
    src/styles/themes.css
    src/components/Header/Header.module.css
    src/App.css
  </files>
  <action>
Fix logo visibility and text readability in both themes:

**1. In src/styles/themes.css:**
Add card background colors for content areas:
```css
/* Light theme - add to :root */
--color-bg-card: rgba(255, 255, 255, 0.85);
--color-bg-card-hover: rgba(255, 255, 255, 0.95);

/* Dark theme - add to [data-theme="dark"] */
--color-bg-card: rgba(15, 15, 26, 0.85);
--color-bg-card-hover: rgba(15, 15, 26, 0.95);

/* Also add to @media (prefers-color-scheme: dark) fallback */
```

**2. In src/components/Header/Header.module.css:**
Add theme-aware logo filter to invert in light mode:
```css
/* After existing .logo styles */
[data-theme="light"] .logo {
  filter: invert(1) brightness(0.2);
}

/* System preference fallback */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]) .logo {
    filter: invert(1) brightness(0.2);
  }
}
```
Note: The white SVG logo inverts to dark for light backgrounds. brightness(0.2) makes it dark enough for contrast.

**3. In src/App.css:**
Add `.content-card` class for text containers:
```css
/* Content card for text readability over waves */
.content-card {
  background: var(--color-bg-card);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: var(--radius-lg, 1rem);
  padding: var(--space-lg, 2rem);
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
  transition: background-color var(--transition-base),
              box-shadow var(--transition-fast);
}
```

Apply content-card to hero-container, intro-container, about-container by adding the class to their existing rules (compound selector or add in markup).
  </action>
  <verify>
Run `npm run dev` and check:
1. Header logo visible in both themes (toggle with ThemeToggle)
2. Content sections have subtle card backgrounds
3. `npm run build` completes without CSS errors
  </verify>
  <done>
Logo filter inverts correctly per theme.
Content sections have semi-transparent card backgrounds.
Build succeeds.
  </done>
</task>

<task type="auto">
  <name>Task 2: Apply content-card class to content sections in App.tsx</name>
  <files>src/App.tsx</files>
  <action>
Add the `content-card` class to the three main content containers in App.tsx:

1. **hero-container:** Change `className="hero-container"` to `className="hero-container content-card"`
2. **intro-container:** Change `className="intro-container"` to `className="intro-container content-card"`
3. **about-container:** Change `className="about-container"` to `className="about-container content-card"`

These are the divs inside each ParallaxLayer section that wrap the text content.
  </action>
  <verify>
Run `npm run dev`:
1. All three sections (Hero, Services, About) have visible card backgrounds
2. Text is clearly readable against the wave background in both themes
3. Cards have subtle blur effect from backdrop-filter
  </verify>
  <done>
All content sections have content-card class applied.
Text content is visually separated from wave backgrounds.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of contrast fixes</name>
  <what-built>
Theme-aware logo filter and content card backgrounds to fix:
1. Logo visibility in light theme (was white on pastel, now inverted to dark)
2. Text readability over waves (now has semi-transparent card background with blur)
  </what-built>
  <how-to-verify>
1. Run `npm run dev` and open http://localhost:5173
2. **Light theme test:**
   - Click theme toggle to switch to light mode
   - Verify header logo is dark/visible (not white)
   - Verify Hero section text is readable (has card background)
   - Scroll to Services and About sections - verify same
3. **Dark theme test:**
   - Click theme toggle to switch to dark mode
   - Verify header logo is white/visible
   - Verify all text sections remain readable
4. **Scroll test:**
   - Scroll through all pages in both themes
   - Verify cards maintain visibility as wave colors shift
5. **Mobile test:**
   - Open DevTools, switch to mobile viewport (375px)
   - Verify logo and content cards work at narrow width
  </how-to-verify>
  <resume-signal>Type "approved" if both themes look good, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- [ ] Logo visible in light theme (dark filter applied)
- [ ] Logo visible in dark theme (white, no filter)
- [ ] Hero section text readable in both themes
- [ ] Services section text readable in both themes
- [ ] About section text readable in both themes
- [ ] Cards have blur effect behind them
- [ ] No CSS build errors
- [ ] 320px viewport still works
</verification>

<success_criteria>
1. Logo passes visual inspection in both themes (no invisible/hard-to-see logo)
2. All text content has 4.5:1+ contrast against its immediate background (the card, not the waves)
3. Cards provide clear visual separation between text and animated waves
4. Theme toggle works correctly with all new styles
5. Build completes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-css-visual-design/04-04-SUMMARY.md`
</output>
