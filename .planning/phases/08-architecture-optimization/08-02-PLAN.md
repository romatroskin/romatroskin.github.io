---
phase: 08-architecture-optimization
plan: 02
type: execute
wave: 2
depends_on:
  - 08-01
files_modified:
  - src/components/animation/* (new folder)
  - src/components/ui/* (move existing)
  - src/components/sections/* (new folder)
  - src/components/common/* (new folder)
autonomous: true

must_haves:
  truths:
    - "Animation components (Perlin, Waves, WavyBackground) are in components/animation/"
    - "UI components (Header, SkipLink, ThemeToggle) are in components/ui/"
    - "Section components (AboutSection, ServicesSection) are in components/sections/"
    - "Common components (ErrorBoundary, PerformanceIndicator, StructuredData) are in components/common/"
    - "Git history is preserved for moved files"
  artifacts:
    - path: "src/components/animation/Perlin.tsx"
      provides: "Animation component in correct location"
      contains: "noise"
    - path: "src/components/ui/Header/Header.tsx"
      provides: "UI component in correct location"
      contains: "Header"
    - path: "src/components/sections/AboutSection/AboutSection.tsx"
      provides: "Section component in correct location"
      contains: "AboutSection"
    - path: "src/components/common/ErrorBoundary/ErrorBoundary.tsx"
      provides: "Common component in correct location"
      contains: "ErrorBoundary"
  key_links:
    - from: "git log"
      to: "moved files"
      via: "git mv preserves history"
      pattern: "git log --follow"
---

<objective>
Reorganize src/components into a clear structure: animation/, ui/, sections/, common/. Move existing sections/ to components/sections/.

Purpose: Create maintainable folder organization following the hybrid structure pattern.
Output: All components organized by type with co-located styles and tests.
</objective>

<execution_context>
@/Users/romatroskin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/romatroskin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-architecture-optimization/08-CONTEXT.md
@.planning/phases/08-architecture-optimization/08-RESEARCH.md
@src/components/
@src/sections/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create new folder structure</name>
  <files>src/components/</files>
  <action>
Create the new folder structure inside src/components/:

```bash
mkdir -p src/components/animation
mkdir -p src/components/ui
mkdir -p src/components/sections
mkdir -p src/components/common
```

This creates:
- animation/ - Perlin noise, Waves, WavyBackground
- ui/ - Header, SkipLink, ThemeToggle (reusable UI primitives)
- sections/ - AboutSection, ServicesSection (page sections)
- common/ - ErrorBoundary, PerformanceIndicator, StructuredData (generic/utility components)
  </action>
  <verify>
    - Folders exist: src/components/animation, src/components/ui, src/components/sections, src/components/common
  </verify>
  <done>
    - All four subfolders created inside src/components/
  </done>
</task>

<task type="auto">
  <name>Task 2: Move animation components</name>
  <files>src/components/animation/</files>
  <action>
Move animation-related components to components/animation/ using git mv to preserve history:

Components to move:
- Perlin.tsx + Perlin.test.tsx
- Waves.tsx + Waves.test.tsx + waves.module.css
- WavyBackground.tsx + WavyBackground.test.tsx

Commands:
```bash
git mv src/components/Perlin.tsx src/components/animation/
git mv src/components/Perlin.test.tsx src/components/animation/
git mv src/components/Waves.tsx src/components/animation/
git mv src/components/Waves.test.tsx src/components/animation/
git mv src/components/waves.module.css src/components/animation/
git mv src/components/WavyBackground.tsx src/components/animation/
git mv src/components/WavyBackground.test.tsx src/components/animation/
```

Note: These components share the Perlin noise system for organic wave animations.
  </action>
  <verify>
    - All animation files exist in src/components/animation/
    - `git status` shows renamed files (not deleted + added)
  </verify>
  <done>
    - Perlin.tsx, Perlin.test.tsx in animation/
    - Waves.tsx, Waves.test.tsx, waves.module.css in animation/
    - WavyBackground.tsx, WavyBackground.test.tsx in animation/
    - Git shows renames with history preserved
  </done>
</task>

<task type="auto">
  <name>Task 3: Move UI components</name>
  <files>src/components/ui/</files>
  <action>
Move UI primitive components to components/ui/ using git mv:

Components to move (already in folders):
- Header/ folder (Header.tsx, Header.test.tsx, Header.module.css, MobileMenu.tsx, MobileMenu.module.css)
- SkipLink/ folder
- ThemeToggle/ folder

Commands:
```bash
git mv src/components/Header src/components/ui/
git mv src/components/SkipLink src/components/ui/
git mv src/components/ThemeToggle src/components/ui/
```

Note: These are reusable UI primitives that could be used across multiple pages/sections.
  </action>
  <verify>
    - Header folder exists at src/components/ui/Header/
    - SkipLink folder exists at src/components/ui/SkipLink/
    - ThemeToggle folder exists at src/components/ui/ThemeToggle/
    - `git status` shows renamed folders
  </verify>
  <done>
    - Header/ moved to ui/Header/
    - SkipLink/ moved to ui/SkipLink/
    - ThemeToggle/ moved to ui/ThemeToggle/
  </done>
</task>

<task type="auto">
  <name>Task 4: Move section components</name>
  <files>src/components/sections/</files>
  <action>
Move page section components from src/sections/ to src/components/sections/:

Components to move:
- AboutSection.tsx
- ServicesSection.tsx

Create folders for each section (following the component folder pattern):
```bash
mkdir -p src/components/sections/AboutSection
mkdir -p src/components/sections/ServicesSection
git mv src/sections/AboutSection.tsx src/components/sections/AboutSection/
git mv src/sections/ServicesSection.tsx src/components/sections/ServicesSection/
```

Then remove the now-empty src/sections folder:
```bash
rmdir src/sections
```

Note: Section components are lazy-loaded in App.tsx and represent distinct page sections.
  </action>
  <verify>
    - AboutSection.tsx at src/components/sections/AboutSection/AboutSection.tsx
    - ServicesSection.tsx at src/components/sections/ServicesSection/ServicesSection.tsx
    - Old src/sections/ folder is removed
  </verify>
  <done>
    - AboutSection in components/sections/AboutSection/
    - ServicesSection in components/sections/ServicesSection/
    - Old sections/ folder removed
  </done>
</task>

<task type="auto">
  <name>Task 5: Move common/utility components</name>
  <files>src/components/common/</files>
  <action>
Move utility/generic components to components/common/:

Components to move:
- ErrorBoundary/ folder (already has index.ts, ErrorBoundary.tsx, fallbacks, test, css module)
- PerformanceIndicator.tsx + PerformanceIndicator.module.css
- StructuredData.tsx

Commands:
```bash
git mv src/components/ErrorBoundary src/components/common/
mkdir -p src/components/common/PerformanceIndicator
git mv src/components/PerformanceIndicator.tsx src/components/common/PerformanceIndicator/
git mv src/components/PerformanceIndicator.module.css src/components/common/PerformanceIndicator/
mkdir -p src/components/common/StructuredData
git mv src/components/StructuredData.tsx src/components/common/StructuredData/
```

Note: These are generic utility components (error handling, performance debugging, SEO metadata) not specific to any page section.
  </action>
  <verify>
    - ErrorBoundary folder at src/components/common/ErrorBoundary/
    - PerformanceIndicator files at src/components/common/PerformanceIndicator/
    - StructuredData at src/components/common/StructuredData/
  </verify>
  <done>
    - ErrorBoundary/ moved to common/ErrorBoundary/
    - PerformanceIndicator in common/PerformanceIndicator/
    - StructuredData in common/StructuredData/
  </done>
</task>

<task type="auto">
  <name>Task 6: Clean up empty css folder</name>
  <files>src/css/</files>
  <action>
Check if src/css/ folder has any remaining content. If it only contains main.css which is unused or redundant with src/styles/, consider its usage:

1. Check if main.css is imported anywhere:
```bash
grep -r "css/main" src/
```

2. If unused, remove the folder:
```bash
rm src/css/main.css
rmdir src/css
```

3. If used, leave it in place for now (can be addressed in a future cleanup).

Note: src/styles/ already exists with tokens.css, themes.css, etc. - this is the intended global styles location.
  </action>
  <verify>
    - Verify src/css/main.css is not imported anywhere before removing
    - Either css/ folder removed (if unused) or documented why kept
  </verify>
  <done>
    - Unused css/ folder cleaned up, OR
    - css/ folder kept with documentation of its usage
  </done>
</task>

<task type="auto">
  <name>Task 7: Verify folder structure</name>
  <files>src/components/</files>
  <action>
Verify the final folder structure matches the target layout:

Expected structure:
```
src/
├── components/
│   ├── animation/
│   │   ├── Perlin.tsx
│   │   ├── Perlin.test.tsx
│   │   ├── Waves.tsx
│   │   ├── Waves.test.tsx
│   │   ├── waves.module.css
│   │   ├── WavyBackground.tsx
│   │   └── WavyBackground.test.tsx
│   ├── ui/
│   │   ├── Header/
│   │   ├── SkipLink/
│   │   └── ThemeToggle/
│   ├── sections/
│   │   ├── AboutSection/
│   │   └── ServicesSection/
│   └── common/
│       ├── ErrorBoundary/
│       ├── PerformanceIndicator/
│       └── StructuredData/
├── hooks/
├── utils/
├── performance/
├── styles/
└── ...
```

Run tree or ls commands to verify structure.

Note: At this point, imports in existing files will be broken. This is expected - Plan 08-03 will update all imports.
  </action>
  <verify>
    - `ls src/components/animation` shows 7 files
    - `ls src/components/ui` shows 3 folders
    - `ls src/components/sections` shows 2 folders
    - `ls src/components/common` shows 3 folders
    - No loose files remain in src/components/ (all organized)
  </verify>
  <done>
    - All components organized into animation/, ui/, sections/, common/
    - No orphan files in src/components/
    - Folder structure matches target layout
  </done>
</task>

</tasks>

<verification>
1. `ls -la src/components/` shows only 4 subdirectories (animation, common, sections, ui)
2. `find src/components -maxdepth 1 -type f` returns empty (no loose files)
3. `git status` shows all changes as renames (R), not deletes (D) + adds (A)
4. `git diff --stat HEAD` shows only file path changes, no content changes

Note: Build and tests will fail at this point due to broken imports. This is expected and will be fixed in Plan 08-03.
</verification>

<success_criteria>
- ARCH-01: Source reorganized into components/, hooks/, utils/, features/ - PARTIAL (folder structure done, imports in 08-03)
</success_criteria>

<output>
After completion, create `.planning/phases/08-architecture-optimization/08-02-SUMMARY.md`
</output>
