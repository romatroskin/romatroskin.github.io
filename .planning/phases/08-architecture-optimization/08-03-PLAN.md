---
phase: 08-architecture-optimization
plan: 03
type: execute
wave: 2
depends_on:
  - 08-01
  - 08-02
files_modified:
  - src/App.tsx
  - src/main.tsx
  - src/components/**/*.tsx (imports within component files)
  - src/components/**/*.test.tsx (test file imports)
autonomous: true

must_haves:
  truths:
    - "All cross-folder imports use @/ path aliases"
    - "Same-folder imports use relative paths (e.g., ./MobileMenu in Header)"
    - "Build completes successfully with new import paths"
    - "All 99+ tests pass with new import paths"
  artifacts:
    - path: "src/App.tsx"
      provides: "Main app component with @/ imports"
      contains: "@/components"
    - path: "src/main.tsx"
      provides: "Entry point with @/ imports"
      contains: "@/performance"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/ui/Header/Header.tsx"
      via: "@/components/ui/Header/Header import"
      pattern: "@/components/ui/Header"
    - from: "src/App.tsx"
      to: "src/hooks/useTheme.ts"
      via: "@/hooks/useTheme import"
      pattern: "@/hooks/useTheme"
---

<objective>
Update all imports to use @/ path aliases for cross-folder imports. Fix broken imports from Plan 08-02 folder restructure.

Purpose: Complete the migration to clean, maintainable import paths.
Output: All imports use @/ aliases, build and tests pass.
</objective>

<execution_context>
@/Users/romatroskin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/romatroskin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-architecture-optimization/08-CONTEXT.md
@.planning/phases/08-architecture-optimization/08-RESEARCH.md
@src/App.tsx
@src/main.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update App.tsx imports</name>
  <files>src/App.tsx</files>
  <action>
Update all imports in App.tsx to use the new folder structure and @/ aliases:

Current imports to update:
```typescript
// From (old paths)
import WavyBackground from "./components/WavyBackground";
import Header from "./components/Header/Header";
import { SkipLink } from "./components/SkipLink/SkipLink";
import { ThemeToggle } from "./components/ThemeToggle/ThemeToggle";
import { useTheme } from "./hooks/useTheme";
import { usePrefersReducedMotion } from './hooks/usePrefersReducedMotion';
import { useAdaptiveFrameRate } from './hooks/useAdaptiveFrameRate';
import { PerformanceIndicator } from './components/PerformanceIndicator';
import { ErrorBoundary, WaveAnimationFallback, AppFallback } from './components/ErrorBoundary';
import { OrganizationSchema } from './components/StructuredData';
const ServicesSection = lazy(() => import('./sections/ServicesSection'));
const AboutSection = lazy(() => import('./sections/AboutSection'));

// To (new paths with @/ aliases)
import WavyBackground from "@/components/animation/WavyBackground";
import Header from "@/components/ui/Header/Header";
import { SkipLink } from "@/components/ui/SkipLink/SkipLink";
import { ThemeToggle } from "@/components/ui/ThemeToggle/ThemeToggle";
import { useTheme } from "@/hooks/useTheme";
import { usePrefersReducedMotion } from "@/hooks/usePrefersReducedMotion";
import { useAdaptiveFrameRate } from "@/hooks/useAdaptiveFrameRate";
import { PerformanceIndicator } from "@/components/common/PerformanceIndicator/PerformanceIndicator";
import { ErrorBoundary, WaveAnimationFallback, AppFallback } from "@/components/common/ErrorBoundary";
import { OrganizationSchema } from "@/components/common/StructuredData/StructuredData";
const ServicesSection = lazy(() => import("@/components/sections/ServicesSection/ServicesSection"));
const AboutSection = lazy(() => import("@/components/sections/AboutSection/AboutSection"));
```

Keep external imports (react, @react-spring, usehooks-ts) unchanged.
Keep local imports (./App.css) as relative.
  </action>
  <verify>
    - All component imports use @/components/...
    - All hook imports use @/hooks/...
    - Run `npm run build` succeeds
    - Run `npm run dev` starts without errors
  </verify>
  <done>
    - App.tsx uses @/ aliases for all cross-folder imports
    - Local CSS import remains relative
    - No TypeScript errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Update main.tsx imports</name>
  <files>src/main.tsx</files>
  <action>
Update imports in main.tsx:

```typescript
// From (old)
import App from "./App.tsx";
import { initWebVitals } from './performance/vitals';
import { monitorLongAnimationFrames } from './performance/loafMonitor';

// To (new with @/ aliases)
import App from "@/App";
import { initWebVitals } from "@/performance/vitals";
import { monitorLongAnimationFrames } from "@/performance/loafMonitor";
```

Keep local CSS import (./index.css) as relative.
  </action>
  <verify>
    - main.tsx uses @/ aliases for cross-folder imports
    - CSS import remains relative
  </verify>
  <done>
    - main.tsx updated with @/ aliases
  </done>
</task>

<task type="auto">
  <name>Task 3: Update App.test.tsx imports</name>
  <files>src/App.test.tsx</files>
  <action>
Update imports in App.test.tsx:

Check current imports and update to use @/ aliases for components/hooks.

Typical pattern:
```typescript
// From
import App from './App';
import { someHook } from './hooks/someHook';

// To
import App from '@/App';
import { someHook } from '@/hooks/someHook';
```
  </action>
  <verify>
    - App.test.tsx uses @/ aliases where appropriate
  </verify>
  <done>
    - App.test.tsx imports updated
  </done>
</task>

<task type="auto">
  <name>Task 4: Update animation component imports</name>
  <files>src/components/animation/*.tsx, src/components/animation/*.test.tsx</files>
  <action>
Update imports within animation components:

1. **WavyBackground.tsx**: Update import of Waves
```typescript
// From
import Waves from './Waves';
// To - same folder, keep relative
import Waves from './Waves';
```

2. **WavyBackground.test.tsx**: Update test imports
```typescript
// Update any @/hooks imports to use aliases
import { usePerlinNoise } from '@/hooks/usePerlinNoise';
```

3. **Waves.tsx**: Update imports
```typescript
// Update hooks imports to use @/ aliases
import { useAnimationFrame } from '@/hooks/useAnimationFrame';
// Or check if hooks are imported from same folder - update accordingly
```

4. **Perlin.test.tsx, Waves.test.tsx**: Update test imports to use @/ where crossing folders

For same-folder imports (e.g., Waves importing waves.module.css), keep relative.
For cross-folder imports (e.g., importing from hooks/), use @/ aliases.
  </action>
  <verify>
    - Animation component files have correct imports
    - Same-folder = relative, cross-folder = @/ alias
    - `npm test -- --run src/components/animation` passes
  </verify>
  <done>
    - All animation component imports correct
    - Tests in animation/ pass
  </done>
</task>

<task type="auto">
  <name>Task 5: Update UI component imports</name>
  <files>src/components/ui/**/*.tsx, src/components/ui/**/*.test.tsx</files>
  <action>
Update imports within UI components:

1. **Header/Header.tsx**:
- Import of MobileMenu stays relative (same folder)
- Import of useScrollSpy should use @/hooks
```typescript
import { useScrollSpy } from '@/hooks/useScrollSpy';
```
- CSS module import stays relative

2. **Header/Header.test.tsx**: Update test imports
```typescript
// Cross-folder imports use @/
import { useScrollSpy } from '@/hooks/useScrollSpy';
// Or any other hook imports
```

3. **SkipLink/SkipLink.tsx, SkipLink.test.tsx**: Check and update any cross-folder imports

4. **ThemeToggle/ThemeToggle.tsx**:
```typescript
import { useTheme } from '@/hooks/useTheme';
```

5. **ThemeToggle/ThemeToggle.test.tsx**: Update test imports

Same-folder (CSS modules, sub-components) = relative
Cross-folder (hooks, utils) = @/ alias
  </action>
  <verify>
    - UI component files have correct import patterns
    - `npm test -- --run src/components/ui` passes
  </verify>
  <done>
    - All UI component imports correct
    - Tests in ui/ pass
  </done>
</task>

<task type="auto">
  <name>Task 6: Update section component imports</name>
  <files>src/components/sections/**/*.tsx</files>
  <action>
Update imports in section components:

1. **AboutSection/AboutSection.tsx**: Check for any imports that need updating
   - If importing hooks, use @/hooks/...
   - If importing UI components, use @/components/ui/...

2. **ServicesSection/ServicesSection.tsx**: Same pattern
   - Check onNavigate prop type imports if any

These are self-contained sections, likely minimal external imports.
  </action>
  <verify>
    - Section components have correct imports
    - No broken imports
  </verify>
  <done>
    - Section component imports updated
  </done>
</task>

<task type="auto">
  <name>Task 7: Update common component imports</name>
  <files>src/components/common/**/*.tsx, src/components/common/**/*.test.tsx</files>
  <action>
Update imports in common components:

1. **ErrorBoundary/index.ts**: Update re-exports if needed
```typescript
// These should be relative within the folder
export { ErrorBoundary } from './ErrorBoundary';
export { WaveAnimationFallback } from './WaveAnimationFallback';
export { AppFallback } from './AppFallback';
```

2. **ErrorBoundary/ErrorBoundary.tsx, .test.tsx**: Update any cross-folder imports

3. **PerformanceIndicator/PerformanceIndicator.tsx**: Check imports
   - CSS module stays relative

4. **StructuredData/StructuredData.tsx**: Likely minimal imports (JSX only)

Same folder = relative, cross folder = @/
  </action>
  <verify>
    - Common component imports correct
    - `npm test -- --run src/components/common` passes
  </verify>
  <done>
    - Common component imports updated
  </done>
</task>

<task type="auto">
  <name>Task 8: Update hook test files</name>
  <files>src/hooks/*.test.ts</files>
  <action>
Update imports in hook test files:

1. **useTheme.test.ts** (if exists): Update any component imports to @/
2. **useScrollSpy.test.ts**: Update imports
3. **usePerlinNoise.test.ts**: Update imports
4. **useAnimationFrame.test.ts**: Update imports

Pattern:
```typescript
// If importing the hook under test from same folder, relative is fine
import { useTheme } from './useTheme';

// If importing utilities, use @/
import { storage } from '@/utils/storage';
```
  </action>
  <verify>
    - Hook test files have correct imports
    - `npm test -- --run src/hooks` passes
  </verify>
  <done>
    - Hook test imports updated
  </done>
</task>

<task type="auto">
  <name>Task 9: Update utility files and tests</name>
  <files>src/utils/*.ts, src/utils/*.test.ts</files>
  <action>
Check utils/ folder for any imports that need updating:

1. **storage.ts**: Likely no external imports
2. **storage.test.ts**: Check for any imports needing updates

Utils should be leaf modules with minimal/no imports from other src/ folders.
  </action>
  <verify>
    - Utils have correct imports
    - `npm test -- --run src/utils` passes
  </verify>
  <done>
    - Utility imports verified/updated
  </done>
</task>

<task type="auto">
  <name>Task 10: Full verification</name>
  <files>All src/**/*.tsx, src/**/*.ts</files>
  <action>
Run full verification to ensure all imports are correct:

1. TypeScript check:
```bash
npx tsc --noEmit
```

2. Full test suite:
```bash
npm test -- --run
```

3. Production build:
```bash
npm run build
```

4. Lint check:
```bash
npm run lint
```

5. Dev server smoke test:
```bash
npm run dev
# Verify app loads without console errors
```

If any errors occur, fix the specific import issues found.
  </action>
  <verify>
    - `npx tsc --noEmit` exits with 0
    - `npm test -- --run` shows all tests passing
    - `npm run build` succeeds
    - `npm run lint` shows no import-related errors
    - Dev server starts and app loads
  </verify>
  <done>
    - TypeScript compilation passes
    - All tests pass
    - Build succeeds
    - Lint passes
    - Dev server works
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` - TypeScript finds no errors
2. `npm test -- --run` - All 99+ tests pass
3. `npm run build` - Production build succeeds
4. `npm run lint` - No import errors from ESLint
5. `npm run dev` - App loads in browser without errors
6. `grep -r "from '\.\./\.\." src/` - No deep relative imports (../.. patterns should be replaced with @/)
</verification>

<success_criteria>
- ARCH-01: Source reorganized into components/, hooks/, utils/, features/ - COMPLETE
- ARCH-02: TypeScript path aliases configured (@/components, etc.) - COMPLETE
</success_criteria>

<output>
After completion, create `.planning/phases/08-architecture-optimization/08-03-SUMMARY.md`
</output>
