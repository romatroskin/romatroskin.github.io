---
phase: 07-seo-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - public/favicon.ico
  - public/icon.svg
  - public/icon-dark.svg
  - public/apple-touch-icon.png
  - public/icon-192.png
  - public/icon-512.png
  - public/manifest.webmanifest
  - index.html
autonomous: true

must_haves:
  truths:
    - "Browser tab shows favicon on desktop (32x32)"
    - "iOS home screen shows proper icon when added (180x180)"
    - "PWA install shows correct icons from manifest"
    - "Favicon adapts to light/dark system theme"
  artifacts:
    - path: "public/favicon.ico"
      provides: "Legacy favicon for older browsers"
    - path: "public/icon.svg"
      provides: "Scalable SVG favicon with theme adaptation"
    - path: "public/apple-touch-icon.png"
      provides: "180x180 PNG for iOS home screen"
    - path: "public/manifest.webmanifest"
      provides: "PWA manifest with icon declarations"
  key_links:
    - from: "index.html"
      to: "public/manifest.webmanifest"
      via: "link rel=manifest"
      pattern: 'rel="manifest".*manifest\\.webmanifest'
---

<objective>
Create complete favicon set and web manifest for cross-platform icon support.

Purpose: Browser displays favicon across all devices (desktop, mobile, iOS home screen) with theme adaptation.
Output: Favicon files (ICO, SVG, PNG) and web manifest for PWA capability.
</objective>

<execution_context>
@/Users/romatroskin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/romatroskin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-seo-foundation/07-CONTEXT.md
@.planning/phases/07-seo-foundation/07-RESEARCH.md
@public/dp_white.svg
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create theme-adaptive SVG favicon</name>
  <files>public/icon.svg</files>
  <action>
Create a theme-adaptive SVG favicon based on the dp_white.svg logo (the "dp" letters).

The SVG should:
1. Use the same path data from dp_white.svg (the "d" and "p" letters)
2. Set viewBox to center the logo with appropriate padding for small sizes
3. Include CSS media query for prefers-color-scheme:
   - Light mode: dark fill (#000000 or similar dark color)
   - Dark mode: white fill (#ffffff)

Example structure:
```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 48">
  <style>
    .icon { fill: #000; }
    @media (prefers-color-scheme: dark) {
      .icon { fill: #fff; }
    }
  </style>
  <!-- dp logo paths -->
</svg>
```

Adjust viewBox to properly frame the logo content (original viewBox is "1.41 27.35 18.85 43.89").
  </action>
  <verify>
    - File exists: `ls public/icon.svg`
    - Contains prefers-color-scheme: `grep "prefers-color-scheme" public/icon.svg`
    - Valid SVG: `npm run build` succeeds
  </verify>
  <done>
    - icon.svg exists in public/
    - SVG contains theme-adaptive CSS with prefers-color-scheme
    - Logo paths match dp_white.svg design
  </done>
</task>

<task type="auto">
  <name>Task 2: Create PNG favicons and web manifest</name>
  <files>public/apple-touch-icon.png, public/icon-192.png, public/icon-512.png, public/favicon.ico, public/manifest.webmanifest</files>
  <action>
Since we cannot generate PNG files programmatically, create placeholder configuration and instructions:

1. Create manifest.webmanifest with proper structure:
```json
{
  "name": "Puff Puff Dev",
  "short_name": "PPD",
  "description": "Turning your ideas into polished software that users love.",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ]
}
```

2. For PNG icons, use the existing dp_white.svg to create:
   - favicon.ico (32x32) - Use an online converter or generate from SVG
   - apple-touch-icon.png (180x180) - Dark background with white logo for visibility
   - icon-192.png (192x192) - For PWA manifest
   - icon-512.png (512x512) - For PWA manifest, also used in Organization schema

Since Claude cannot generate binary PNG files directly, the executor should:
- Use a favicon generator service (favicon.io, RealFaviconGenerator) with the dp_white.svg
- Or use ImageMagick CLI: `convert -background black -gravity center -extent 180x180 dp_white.svg apple-touch-icon.png`
- Or create simple placeholder PNGs and note for manual refinement

For this task: Create manifest.webmanifest and leave instructions for PNG generation.
  </action>
  <verify>
    - `cat public/manifest.webmanifest` shows valid JSON
    - `npm run build` succeeds
  </verify>
  <done>
    - manifest.webmanifest exists with correct structure
    - PNG icon strategy documented
  </done>
</task>

<task type="auto">
  <name>Task 3: Update index.html favicon references</name>
  <files>index.html</files>
  <action>
Update index.html to reference the new favicon set:

1. Replace current favicon link:
   ```html
   <link rel="icon" type="image/svg+xml" href="/dp_white.svg" />
   ```

   With complete favicon set:
   ```html
   <link rel="icon" href="/favicon.ico" sizes="32x32" />
   <link rel="icon" href="/icon.svg" type="image/svg+xml" />
   <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
   <link rel="manifest" href="/manifest.webmanifest" />
   ```

2. Keep the existing theme-color meta tag: `<meta name="theme-color" content="#000" />`

3. Remove preconnect to raw.githubusercontent.com and update preload:
   - Remove: `<link rel="preconnect" href="https://raw.githubusercontent.com" crossorigin>`
   - Update preload to reference local logo (to be added in Plan 04)
  </action>
  <verify>
    - `grep "icon.svg" index.html` shows SVG favicon reference
    - `grep "apple-touch-icon" index.html` shows iOS icon reference
    - `grep "manifest.webmanifest" index.html` shows manifest reference
    - `npm run build` succeeds
  </verify>
  <done>
    - index.html references all favicon types
    - manifest.webmanifest linked
    - Legacy ICO fallback present
  </done>
</task>

</tasks>

<verification>
1. All favicon references in index.html: `grep -E "(favicon|icon\\.svg|apple-touch-icon|manifest)" index.html`
2. manifest.webmanifest is valid JSON: `node -e "console.log(JSON.parse(require('fs').readFileSync('public/manifest.webmanifest')))"`
3. Build succeeds: `npm run build`
</verification>

<success_criteria>
- SEO-08: Complete favicon set (all sizes, apple-touch-icon) - DONE (manifest + SVG created, PNG generation instructions provided)
- Browser displays SVG favicon with theme adaptation
- Web manifest configured for PWA "Add to Home Screen"
</success_criteria>

<output>
After completion, create `.planning/phases/07-seo-foundation/07-02-SUMMARY.md`
</output>
